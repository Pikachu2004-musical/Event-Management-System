<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "Event Management System" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <header class="topbar">
      <div class="topbar__title">Event Management System</div>
      <nav class="topbar__nav">
        <a href="{{ url_for('dashboard') }}">Home</a>
        <a href="{{ url_for('vendor_main') }}">Vendor</a>
        <a href="{{ url_for('transactions') }}">Transactions</a>
        <a href="{{ url_for('reports') }}">Reports</a>
        {% if g.user and g.user["role"] == "admin" %}
          <a href="{{ url_for('maintenance') }}">Maintenance</a>
        {% endif %}
        <a href="{{ url_for('membership_add') }}">Add Membership</a>
        <a href="{{ url_for('membership_update') }}">Update Membership</a>
        <a href="{{ url_for('flow_chart') }}">Flow Chart</a>
      </nav>
      <div class="topbar__user">
        {% if g.user %}
          <span class="badge">{{ g.user["role"] }}</span>
          <span class="muted">{{ g.user["username"] }}</span>
          <form method="post" action="{{ url_for('logout') }}" class="inline">
            <button class="btn btn--ghost" type="submit">Logout</button>
          </form>
        {% else %}
          <a class="btn btn--ghost" href="{{ url_for('login') }}">Login</a>
        {% endif %}
      </div>
    </header>

    <main class="container">
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          <div class="toasts">
            {% for category, message in messages %}
              <div class="toast toast--{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </main>

    <footer class="footer">
      <div class="muted">Chart link is shown on all pages for navigation.</div>
    </footer>
  </body>
</html>


